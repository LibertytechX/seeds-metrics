# ID Comparison Report: verticals.tsv vs Django Database

**Date**: 2025-11-09  
**Database**: Django Source Database (164.90.155.2:5432/savings)  
**Table**: `accounts_customuser`  
**Field**: `customer_user_id`  

---

## Executive Summary

Compared 558 unique loan officer IDs from `verticals.tsv` with 6,799 unique `customer_user_id` values in the Django `accounts_customuser` table.

### Key Findings

| Metric | Count | Percentage |
|--------|-------|------------|
| **Total IDs in TSV file** | 558 | 100% |
| **Total IDs in database** | 6,799 | 100% |
| **Matching IDs (in both)** | 550 | 98.57% of TSV |
| **IDs only in TSV (missing from DB)** | 8 | 1.43% of TSV |
| **IDs only in DB (missing from TSV)** | 6,249 | 91.91% of DB |

---

## ‚úÖ Good News

**98.57% match rate** - 550 out of 558 IDs in the TSV file exist in the database. This indicates excellent data consistency.

---

## ‚ö†Ô∏è IDs in TSV but NOT in Database (8 IDs)

These loan officers are listed in the `verticals.tsv` file but do not exist in the Django database:

| ID | Email | Name | Phone |
|----|-------|------|-------|
| 1032 | frederickjonathan26@gmail.com | Frederick Jonathan | 2.34817E+12 |
| 7401 | akwanvictoria174@gmail.com | Victoria akwan | 2.34807E+12 |
| 7519 | pattowilliams@gmail.com | Patience Williams | 2.34906E+12 |
| 7840 | ahoyajanet@gmail.com | Janet Ahoya | 2.3481E+12 |
| 8279 | olamilekanqudus828@gmail.com | Olamilekan Qudus | 2.34902E+12 |
| 8646 | faithchi407@gmail.con | chioma faith | 2.34912E+12 |
| 9956 | aye@gmail.com | Ayeni Blessing | 2.34814E+12 |
| 10238 | boladeolowe@gmail.com | Olowe Raphael | 2.34813E+12 |

### Possible Reasons

1. **Deleted Users**: These users may have been deleted from the database
2. **Incorrect IDs**: The IDs in the TSV file may be incorrect
3. **Data Entry Errors**: Typos in the TSV file
4. **Pending Creation**: Users not yet created in the system

### Recommended Actions

1. Verify if these users should exist in the system
2. Check if they were recently deleted
3. Correct the TSV file if IDs are wrong
4. Create these users in the database if they should exist

---

## ‚ÑπÔ∏è IDs in Database but NOT in TSV (6,249 IDs)

There are 6,249 `customer_user_id` values in the database that are not in the TSV file.

### Analysis

This is **expected behavior** because:
- The TSV file contains only **loan officers** (agents/staff)
- The database contains **all users** including:
  - Customers
  - Merchants
  - Other user types
  - Inactive users
  - System users

The TSV file represents only **8.09%** of all users in the database, which is reasonable for a loan officer list.

---

## üìä Data Quality Assessment

### Overall Data Quality: **EXCELLENT** ‚úÖ

- **98.57% accuracy** - Nearly all TSV IDs exist in the database
- Only **8 discrepancies** out of 558 IDs
- Clear mapping between TSV file and database field (`customer_user_id`)

### Recommendations

1. ‚úÖ **Continue using the TSV file** - Data quality is excellent
2. ‚ö†Ô∏è **Investigate the 8 missing IDs** - Determine if they should be added or removed
3. ‚ÑπÔ∏è **Document the mapping** - TSV `loan_officer_id` ‚Üí DB `customer_user_id`
4. üìù **Regular validation** - Run this comparison periodically to catch discrepancies

---

## Technical Details

### Database Query Used

```sql
SELECT customer_user_id 
FROM accounts_customuser 
WHERE customer_user_id IS NOT NULL 
ORDER BY customer_user_id;
```

### TSV File Structure

- **File**: `verticals.tsv`
- **Total Rows**: 560 (559 data rows + 1 header)
- **Unique IDs**: 558
- **ID Column**: Column 1 (`loan_officer_id`)

### Files Generated

- `/tmp/tsv_ids.txt` - All IDs from TSV file (558 IDs)
- `/tmp/db_ids.txt` - All IDs from database (6,799 IDs)
- `/tmp/matching_ids.txt` - IDs in both TSV and DB (550 IDs)
- `/tmp/tsv_only.txt` - IDs only in TSV (8 IDs)
- `/tmp/db_only.txt` - IDs only in DB (6,249 IDs)

---

## Conclusion

The comparison shows **excellent data consistency** between the `verticals.tsv` file and the Django database. With a 98.57% match rate, the TSV file is highly reliable for loan officer data.

The 8 missing IDs should be investigated, but they represent a very small percentage (1.43%) and may be legitimate deletions or data entry errors.

**Status**: ‚úÖ **PASSED** - Data quality is acceptable for production use.

---

*Report generated by: compare_ids.sh*  
*Comparison date: 2025-11-09*

